---
title: "covid 19"
author: "Daniella Parra"
date: "Summer 2021"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(digits=2)
require(tidyverse)
require(tigerstats)
require(lubridate)
kRdata <- read.csv(file = 'kRdata.csv')
```
### Data is from the Patient_Info dataset from South Korea 1 Jan to 1 May 
### This is contained in a downloadable zip file from kaggle

Some of the data was uncoded for sex - sex must be just male or female
77 of the data entries were coded sex  as blank, so we omit these.
state of a patient must be died or alive - we adjust that as well   
  
# Question 1 - Is dying independent of sex




Table of patients:
```{r}

# cross tabulation, patient state by gender

with(kRdata, table(Sex, result))

```

We can see from the first table how many people we start off. In the females we have 1,831 and 25 dead. 

In the males we have 1,411 and 44 dead. 

## We create two bar charts - one based on frequency and the other on percent, use ggplot commands to do this

#### Plot barplots tigerstats way

```{r}
barchartGC(~result + sex,data=kRdata)
barchartGC(~result + sex,data=kRdata, type="percent")

```

In the barchart above we can see that blue is female and light purple is males, and in the female on the left we can see that they are roughly around 58% alive, and on the right they are roughly around 35% dead. 

On the male side we can see that they are around 42% less alive compared to the females, we also have to consider that they did start off with a little over 400 people less than the females. Although on the male side they did have more people die which makes their percentage a little bit over 60%.  


#### Plot barplots ggplot way

```{r}
dd2 <- kRdata %>% group_by(result,sex) %>% summarize(count=n()) %>% mutate(prcnt=count/sum(count))


# the group_by followed by summarize(count=n())

basicC <- ggplot(dd2,aes(x=sex,y=count,fill=result))
basicC + geom_bar(stat="identity",position="dodge")

#Now for percentage plot

basicCC <- ggplot(dd2,aes(x=sex,y=prcnt*100,fill=result)) 
basicCC + geom_bar(stat="identity", position = "dodge")
```

We can see this chart is the same as the one above, although this one is more clear and we can see what is exact. 




  
## Numerical results

```{r}
table1 <- xtabs(~sex + result, data=kRdata)
rowPerc(table1)
colPerc(table1)
```

## Inferential results 

```{r}
chisq.test(table1)
chisqtestGC(table1)
fisher.test(table1)
```


## Conclusions

